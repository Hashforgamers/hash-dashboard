"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142],{72142:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(57437),s=r(31229),a=r(13590),o=r(29501),i=r(14438),l=r(27648),d=r(2265),c=r(33145),u=r(15681),m=r(62869),f=r(66070),g=r(89345),p=r(66337),x=r(88906),h=r(51817),v=r(40284),y=r(95186),b=r(1043),w=r(38303),N=r(25922);let j=s.z.object({email:s.z.string().email({message:"Invalid email address"}),password:s.z.string().min(6,{message:"Password must be at least 6 characters long"}).regex(/[a-zA-Z0-9]/,{message:"Password must be alphanumeric"}),parent_type:s.z.string().min(1,{message:"Parent type is required"})});function A(){let e=(0,o.cI)({resolver:(0,a.F)(j),defaultValues:{email:"",password:"",parent_type:"vendor"}}),[t,r]=(0,d.useState)(!1),[s,A]=(0,d.useState)(""),[_,S]=(0,d.useState)(!1),I=(0,d.useRef)(0),{resolvedTheme:C}=(0,N.F)(),[k,R]=(0,d.useState)(!1);(0,d.useEffect)(()=>{R(!0)},[]);let E={id:-1,type:"vendor",email:"dummy@hash.com"},P=()=>{try{localStorage.removeItem("vendors"),localStorage.removeItem("vendor_login_email"),localStorage.removeItem("jwtToken"),localStorage.removeItem("tokenExpiration"),sessionStorage.clear()}catch(e){console.warn("Error clearing session data:",e)}},L=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;for(let n=1;n<=r;n++){let s=new AbortController,a=setTimeout(()=>s.abort(),1===n?45e3:2e4);try{1===n&&i.Am.info("Connecting to server... This may take up to 30 seconds.",{duration:8e3,id:"server-connecting"});let r=await fetch(e,{...t,signal:s.signal,headers:{...t.headers,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return clearTimeout(a),i.Am.dismiss("server-connecting"),r.status>=400&&r.status,r}catch(t){if(clearTimeout(a),i.Am.dismiss("server-connecting"),n===r)throw t;let e=1===n?8e3:3e3;i.Am.info("Connection failed. Retrying in ".concat(e/1e3," seconds..."),{duration:e-500}),await new Promise(t=>setTimeout(t,e))}}};async function T(e){if(_)return;let t=Date.now();if(t-I.current<2e3){i.Am.warning("Please wait before trying again.");return}I.current=t;try{S(!0),r(!0),A(""),P();let t=Date.now(),n="".concat(w.ZE,"/api/login?t=").concat(t),s=await L(n,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password,parent_type:"vendor",timestamp:t})}),a={};try{a=await s.json()}catch(e){throw Error("Server returned an unexpected response.")}if(!s.ok){let e=a.message||a.error||(401===s.status?"Invalid email or password.":403===s.status?"Access denied.":"Login failed (".concat(s.status,"). Please try again."));A(e),i.Am.error(e);return}if("success"===a.status){let t=a.vendors;if(Array.isArray(t)&&t.length>0){await new Promise(e=>setTimeout(e,100)),localStorage.setItem("vendors",JSON.stringify(t)),localStorage.setItem("vendor_login_email",e.email),localStorage.setItem("vendor_account_email",e.email);let r=function(e){let t={...e,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+3600};function r(e){return btoa(JSON.stringify(e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}let n=r({alg:"HS256",typ:"JWT"}),s=r(t);return"".concat(n,".").concat(s,".dummy_signature")}(E);localStorage.setItem("jwtToken",r);let n=Date.now()+36e5;localStorage.setItem("tokenExpiration",n.toString()),i.Am.success("Login successful!"),window.location.replace("/select-cafe")}else i.Am.error("No vendors found for this account.")}else{let e=a.message||"Login failed. Please try again.";A(e),i.Am.error(e)}}catch(t){var n,s,a,o,l,d;console.error("Login error:",t);let e="Failed to submit the form. Please try again.";"AbortError"===t.name?e="Server is taking too long to respond. Please try again in a moment.":(null===(n=t.message)||void 0===n?void 0:n.includes("503"))||(null===(s=t.message)||void 0===s?void 0:s.includes("502"))?e="Server is starting up. Please try again in a moment.":(null===(a=t.message)||void 0===a?void 0:a.includes("Failed to fetch"))||(null===(o=t.message)||void 0===o?void 0:o.includes("NetworkError"))?e="Network connection issue. Please check your internet connection.":(null===(l=t.message)||void 0===l?void 0:l.includes("SSL"))||(null===(d=t.message)||void 0===d?void 0:d.includes("certificate"))?e="SSL connection issue. Please try again.":t.message&&(e=t.message),A(e),i.Am.error(e)}finally{r(!1),S(!1)}}return(0,d.useEffect)(()=>{(()=>{let e=localStorage.getItem("vendors"),t=localStorage.getItem("jwtToken"),r=localStorage.getItem("vendor_login_email");(e&&!t||t&&!e||r&&!t)&&(console.warn("Detected partial session data, clearing..."),P())})(),e.reset({email:"",password:"",parent_type:"vendor"}),A("")},[e]),(0,n.jsx)("div",{className:"premium-shell flex min-h-screen items-center justify-center overflow-hidden p-3 sm:p-4",children:(0,n.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,n.jsxs)(f.Zb,{className:"premium-card rounded-2xl border shadow-2xl",children:[(0,n.jsxs)(f.Ol,{className:"text-center pb-8",children:[(0,n.jsx)("div",{className:"flex justify-center mb-6",children:(0,n.jsxs)("div",{className:"relative",children:[k?(0,n.jsx)(c.default,{src:"dark"===C?"/whitehashlogo.png":"/blackhashlogo.png",alt:"Hash for Gamers",width:120,height:120,className:"drop-shadow-2xl"}):(0,n.jsx)(c.default,{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"Hash for Gamers",width:120,height:120,className:"drop-shadow-2xl"}),(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-emerald-400/20 blur-xl animate-pulse"})]})}),(0,n.jsx)(f.ll,{className:"premium-heading mb-2 text-3xl font-bold tracking-tight text-foreground",children:"Cafe Control Login"}),(0,n.jsx)(f.SZ,{className:"premium-subtle text-base",children:"Enter your operator credentials to access live gaming operations."})]}),(0,n.jsxs)(f.aY,{className:"space-y-6",children:[(0,n.jsx)(u.l0,{...e,children:(0,n.jsxs)("form",{onSubmit:e.handleSubmit(T),className:"space-y-6",children:[(0,n.jsx)(u.Wi,{control:e.control,name:"email",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsxs)(u.lX,{className:"text-foreground font-medium flex items-center gap-2",children:[(0,n.jsx)(g.Z,{className:"w-4 h-4 text-cyan-400"}),"Email Address"]}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(y.I,{placeholder:"Enter your email",type:"email",autoComplete:"email",className:"h-12 bg-input border-input text-foreground placeholder:text-muted-foreground focus:border-cyan-400 focus:ring-cyan-400/20",...t,onChange:e=>{t.onChange(e),A("")}})}),(0,n.jsx)(u.zG,{className:"text-destructive"})]})}}),(0,n.jsx)(u.Wi,{control:e.control,name:"password",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.xJ,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)(u.lX,{className:"text-foreground font-medium flex items-center gap-2",children:[(0,n.jsx)(p.Z,{className:"w-4 h-4 text-cyan-400"}),"Password"]}),(0,n.jsx)(l.default,{href:"/login/forget-password",className:"text-sm text-primary hover:text-primary/80 transition-colors duration-200 hover:underline",children:"Forgot password?"})]}),(0,n.jsx)(u.NI,{children:(0,n.jsx)(b.W,{placeholder:"Enter your password",autoComplete:"current-password",className:"h-12 bg-input border-input text-foreground placeholder:text-muted-foreground focus:border-cyan-400 focus:ring-cyan-400/20",...t,onChange:e=>{t.onChange(e),A("")}})}),(0,n.jsx)(u.zG,{className:"text-destructive"})]})}}),s&&(0,n.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:(0,n.jsxs)("p",{className:"text-destructive text-sm text-center flex items-center justify-center gap-2",children:[(0,n.jsx)(x.Z,{className:"w-4 h-4"}),s]})}),(0,n.jsx)(m.z,{type:"submit",className:"w-full h-12 rounded-lg bg-gradient-to-r from-lime-500 via-emerald-500 to-cyan-500 font-semibold text-primary-foreground shadow-lg transition-all duration-200 hover:from-lime-400 hover:via-emerald-500 hover:to-cyan-400 hover:shadow-cyan-500/20 active:scale-[0.98]",disabled:t,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing In..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4 pt-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-xs",children:[(0,n.jsx)(x.Z,{className:"w-3 h-3"}),(0,n.jsx)("span",{children:"Secure Login"})]}),(0,n.jsx)("div",{className:"w-1 h-1 bg-muted-foreground rounded-full"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-xs",children:[(0,n.jsx)(p.Z,{className:"w-3 h-3"}),(0,n.jsx)("span",{children:"256-bit SSL"})]})]})]})]}),(0,n.jsx)("div",{className:"text-center mt-8",children:(0,n.jsxs)("p",{className:"premium-subtle text-sm",children:["\xa9 ",new Date().getFullYear()," Hash for Gamers. All rights reserved."]})})]})})}},62869:function(e,t,r){r.d(t,{d:function(){return l},z:function(){return d}});var n=r(57437),s=r(2265),a=r(37053),o=r(90535),i=r(94508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...c})});d.displayName="Button"},66070:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},ll:function(){return l}});var n=r(57437),s=r(2265),a=r(94508);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},15681:function(e,t,r){r.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return d},lX:function(){return p},xJ:function(){return g},zG:function(){return h}});var n=r(57437),s=r(2265),a=r(37053),o=r(29501),i=r(94508),l=r(26815);let d=o.RV,c=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(o.Qr,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:r,formState:n}=(0,o.Gc)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},f=s.createContext({}),g=s.forwardRef((e,t)=>{let{className:r,...a}=e,o=s.useId();return(0,n.jsx)(f.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...a})})});g.displayName="FormItem";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:a,formItemId:o}=m();return(0,n.jsx)(l._,{ref:t,className:(0,i.cn)(a&&"text-destructive",r),htmlFor:o,...s})});p.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:o,formDescriptionId:i,formMessageId:l}=m();return(0,n.jsx)(a.g7,{ref:t,id:o,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...r})});x.displayName="FormControl",s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:a}=m();return(0,n.jsx)("p",{ref:t,id:a,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})}).displayName="FormDescription";let h=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e,{error:o,formMessageId:l}=m(),d=o?String(null==o?void 0:o.message):s;return d?(0,n.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm font-medium text-destructive",r),...a,children:d}):null});h.displayName="FormMessage"},95186:function(e,t,r){r.d(t,{I:function(){return o}});var n=r(57437),s=r(2265),a=r(94508);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},26815:function(e,t,r){r.d(t,{_:function(){return d}});var n=r(57437),s=r(2265),a=r(6394),o=r(90535),i=r(94508);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...s})});d.displayName=a.f.displayName},1043:function(e,t,r){r.d(t,{W:function(){return d}});var n=r(57437),s=r(2265),a=r(49089),o=r(62869),i=r(94508);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});l.displayName="Input";let d=(0,s.forwardRef)((e,t)=>{let{className:r,...d}=e,[c,u]=(0,s.useState)(!1),m=""===d.value||void 0===d.value||d.disabled;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l,{type:c?"text":"password",className:(0,i.cn)("hide-password-toggle pr-10",r),ref:t,...d}),(0,n.jsxs)(o.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(e=>!e),disabled:m,children:[c&&!m?(0,n.jsx)(a.z5B,{className:"h-4 w-4","aria-hidden":"true"}):(0,n.jsx)(a.tjB,{className:"h-4 w-4","aria-hidden":"true"}),(0,n.jsx)("span",{className:"sr-only",children:c?"Hide password":"Show password"})]}),(0,n.jsx)("style",{children:"\n					.hide-password-toggle::-ms-reveal,\n					.hide-password-toggle::-ms-clear {\n						visibility: hidden;\n						pointer-events: none;\n						display: none;\n					}\n				"})]})});d.displayName="PasswordInput"},94508:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},40284:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]])},38303:function(e,t,r){r.d(t,{NV:function(){return o},ZE:function(){return a},m7:function(){return s},o5:function(){return l},o8:function(){return i},yj:function(){return d}});var n=r(40257);let s=n.env.NEXT_PUBLIC_DASHBOARD_URL,a=n.env.NEXT_PUBLIC_LOGIN_URL;n.env.NEXT_PUBLIC_USER_ONBOARD;let o=n.env.NEXT_PUBLIC_VENDOR_ONBOARD,i=n.env.NEXT_PUBLIC_BOOKING_URL,l=n.env.NEXT_PUBLIC_SOCKET_DASHBOARD_URL,d=n.env.NEXT_PUBLIC_RAZORPAY_KEY_ID||"rzp_test_viVAhwtbVdu1X4"}}]);