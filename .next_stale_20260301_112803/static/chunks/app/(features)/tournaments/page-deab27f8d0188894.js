(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1474],{87509:function(e,t,s){Promise.resolve().then(s.bind(s,37329))},37329:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var l=s(57437),a=s(2265),n=s(99376),c=s(99397),r=s(73247),i=s(49474),d=s(67782),o=s(92451),m=s(10407),u=s(9923),x=s(14474),h=s(4827),b=s(42357);let p={draft:"bg-gray-500/20 text-gray-400",published:"bg-blue-500/20 text-blue-400",ongoing:"bg-green-500/20 text-green-400",completed:"bg-purple-500/20 text-purple-400",canceled:"bg-red-500/20 text-red-400"},j={draft:"Draft",published:"Published",ongoing:"Live",completed:"Completed",canceled:"Canceled"},g=["draft","published","ongoing","completed","canceled"];function f(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(null),{token:f,loading:N,error:v,refresh:y}=(0,u.K)(t),[w,k]=(0,a.useState)([]),[C,S]=(0,a.useState)(!1),[D,_]=(0,a.useState)(""),[Z,E]=(0,a.useState)(""),[L,T]=(0,a.useState)(1),[M,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("jwtToken");if(e)try{let t=(0,x.o)(e);console.log("\uD83D\uDD11 Decoded vendor ID:",t.sub.id),s(t.sub.id)}catch(e){console.error("❌ Error decoding JWT token:",e)}},[]),(0,a.useEffect)(()=>{f&&(S(!0),(0,h.yc)(f,Z||void 0).then(k).catch(console.error).finally(()=>S(!1)))},[f,Z]);let A=w.filter(e=>e.title.toLowerCase().includes(D.toLowerCase())),I=Math.max(1,Math.ceil(A.length/5)),R=A.slice((L-1)*5,5*L);return N?(0,l.jsx)("div",{className:"page-container items-center justify-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("p",{className:"body-text-muted",children:"Initializing session..."})]})}):v?(0,l.jsx)("div",{className:"page-container items-center justify-center",children:(0,l.jsxs)("div",{className:"content-card content-card-padding text-center max-w-sm w-full",children:[(0,l.jsx)("p",{className:"text-red-400 mb-4 body-text",children:v}),(0,l.jsx)("button",{className:"btn-primary w-full justify-center",onClick:y,children:"Retry"})]})}):(0,l.jsx)(b.DashboardLayout,{children:(0,l.jsxs)("div",{className:"page-container",onClick:()=>P(null),children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsxs)("div",{className:"page-title-section",children:[(0,l.jsx)("h1",{className:"page-title",children:"Tournaments"}),(0,l.jsx)("p",{className:"page-subtitle",children:"Manage all ongoing, upcoming, and completed tournaments."})]}),(0,l.jsx)("div",{className:"page-actions",children:(0,l.jsxs)("button",{className:"btn-primary",onClick:()=>e.push("/tournaments/create"),children:[(0,l.jsx)(c.Z,{className:"icon-md"})," Create Tournament"]})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-4 flex-shrink-0",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(r.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 icon-md text-muted-foreground"}),(0,l.jsx)("input",{className:"input-field pl-10",placeholder:"Search tournaments...",value:D,onChange:e=>{_(e.target.value),T(1)}})]}),(0,l.jsxs)("select",{className:"select-field w-full sm:w-44",value:Z,onChange:e=>{E(e.target.value),T(1)},children:[(0,l.jsx)("option",{value:"",children:"All Statuses"}),g.map(e=>(0,l.jsx)("option",{value:e,children:j[e]},e))]})]}),(0,l.jsx)("div",{className:"table-container flex-1 overflow-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"table-header",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"table-cell table-header-text text-left",children:"Tournament"}),(0,l.jsx)("th",{className:"table-cell table-header-text text-left",children:"Start Date"}),(0,l.jsx)("th",{className:"table-cell table-header-text text-left",children:"End Date"}),(0,l.jsx)("th",{className:"table-cell table-header-text text-left",children:"Status"}),(0,l.jsx)("th",{className:"table-cell table-header-text text-right",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:C?[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,l.jsx)("tr",{className:"table-row animate-pulse",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,l.jsx)("td",{className:"table-cell",children:(0,l.jsx)("div",{className:"h-4 bg-muted rounded w-full max-w-[180px]"})},t))},t)):0===R.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"table-cell text-center py-20",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,l.jsx)(i.Z,{className:"w-10 h-10 text-muted-foreground/30"}),(0,l.jsx)("p",{className:"body-text-muted",children:D||Z?"No tournaments match your filters.":"No tournaments yet."}),!D&&!Z&&(0,l.jsxs)("button",{className:"btn-primary",onClick:()=>e.push("/tournaments/create"),children:[(0,l.jsx)(c.Z,{className:"icon-sm"})," Create your first one"]})]})})}):R.map(t=>(0,l.jsxs)("tr",{className:"table-row cursor-pointer",onClick:()=>e.push("/tournaments/".concat(t.id)),children:[(0,l.jsx)("td",{className:"table-cell",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[t.banner_image_url?(0,l.jsx)("img",{src:t.banner_image_url,alt:t.title,className:"w-10 h-10 rounded-lg object-cover flex-shrink-0 border border-border"}):(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg flex-shrink-0 icon-blue flex items-center justify-center",children:(0,l.jsx)(i.Z,{className:"icon-md text-blue-400"})}),(0,l.jsx)("span",{className:"table-cell-text font-medium",children:t.title})]})}),(0,l.jsx)("td",{className:"table-cell body-text-muted",children:new Date(t.start_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,l.jsx)("td",{className:"table-cell body-text-muted",children:new Date(t.end_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,l.jsx)("td",{className:"table-cell",children:(0,l.jsx)("span",{className:"text-xs font-semibold px-3 py-1 rounded-full ".concat(p[t.status]),children:j[t.status]})}),(0,l.jsxs)("td",{className:"table-cell text-right relative",children:[(0,l.jsx)("button",{className:"btn-icon",onClick:e=>{e.stopPropagation(),P(M===t.id?null:t.id)},children:(0,l.jsx)(d.Z,{className:"icon-md"})}),M===t.id&&(0,l.jsxs)("div",{className:"absolute right-4 top-10 z-20 bg-card border border-border rounded-lg shadow-xl py-1 w-44",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",onClick:()=>e.push("/tournaments/".concat(t.id)),children:"View Details"}),(0,l.jsx)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",onClick:()=>e.push("/tournaments/".concat(t.id,"?tab=registrations")),children:"View Registrations"})]})]})]},t.id))})]})}),I>1&&(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4 flex-shrink-0",children:[(0,l.jsxs)("p",{className:"body-text-muted",children:["Showing ",(L-1)*5+1,"–",Math.min(5*L,A.length)," of ",A.length," results"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("button",{className:"btn-icon disabled:opacity-40",disabled:1===L,onClick:()=>T(e=>e-1),children:(0,l.jsx)(o.Z,{className:"icon-md"})}),Array.from({length:I},(e,t)=>t+1).map(e=>(0,l.jsx)("button",{onClick:()=>T(e),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors ".concat(L===e?"bg-primary text-primary-foreground":"btn-secondary"),children:e},e)),(0,l.jsx)("button",{className:"btn-icon disabled:opacity-40",disabled:L===I,onClick:()=>T(e=>e+1),children:(0,l.jsx)(m.Z,{className:"icon-md"})})]})]})]})})}}},function(e){e.O(0,[7861,5585,6651,6877,2971,2117,1744],function(){return e(e.s=87509)}),_N_E=e.O()}]);