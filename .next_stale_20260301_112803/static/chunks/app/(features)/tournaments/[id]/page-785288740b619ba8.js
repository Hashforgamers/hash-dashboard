(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1439],{84543:function(e,t,s){Promise.resolve().then(s.bind(s,26062))},26062:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(57437),l=s(2265),n=s(99376),c=s(92934),r=s(91723),d=s(99388),i=s(49474),o=s(14938),m=s(10407),x=s(92735),u=s(53113),h=s(95805),j=s(88226),p=s(73247),b=s(9923),g=s(4827),f=s(14474),N=s(42357);let v={draft:"bg-gray-500/20 text-gray-300 border border-gray-500/30",published:"bg-blue-500/20 text-blue-300 border border-blue-500/30",ongoing:"bg-green-500/20 text-green-300 border border-green-500/30",completed:"bg-purple-500/20 text-purple-300 border border-purple-500/30",canceled:"bg-red-500/20 text-red-300 border border-red-500/30"},y={confirmed:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",rejected:"bg-red-500/20 text-red-400",canceled:"bg-gray-500/20 text-gray-400"},w={paid:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",failed:"bg-red-500/20 text-red-400",refunded:"bg-purple-500/20 text-purple-400"},_={confirmed:(0,a.jsx)(c.Z,{className:"w-3 h-3"}),pending:(0,a.jsx)(r.Z,{className:"w-3 h-3"}),rejected:(0,a.jsx)(d.Z,{className:"w-3 h-3"}),canceled:(0,a.jsx)(d.Z,{className:"w-3 h-3"})};function C(){let e=(0,n.useRouter)(),t=(0,n.useParams)().id,[s,C]=(0,l.useState)(null),{token:k,loading:Z}=(0,b.K)(s),[S,D]=(0,l.useState)(null),[E,L]=(0,l.useState)([]),[P,R]=(0,l.useState)(!0),[T,U]=(0,l.useState)(!0),[A,O]=(0,l.useState)(""),[W,B]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("jwtToken");if(e)try{let t=(0,f.o)(e);console.log("\uD83D\uDD11 Decoded vendor ID:",t.sub.id),C(t.sub.id)}catch(e){console.error("❌ Error decoding JWT token:",e)}},[]),(0,l.useEffect)(()=>{k&&(0,g.yc)(k).then(e=>{var s;return D(null!==(s=e.find(e=>e.id===t))&&void 0!==s?s:null)}).catch(console.error).finally(()=>R(!1))},[k,t]),(0,l.useEffect)(()=>{k&&(0,g.mv)(k,t).then(L).catch(console.error).finally(()=>U(!1))},[k,t]);let I=e=>new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),H=e=>new Date(e).toLocaleDateString("en-CA"),J=E.filter(e=>{var t,s;let a=(null!==(s=null!==(t=e.team_name)&&void 0!==t?t:e.contact_name)&&void 0!==s?s:"").toLowerCase().includes(A.toLowerCase()),l=!W||e.status===W;return a&&l}),K=E.filter(e=>"confirmed"===e.status).length,M=E.filter(e=>"pending"===e.status).length,V=E.filter(e=>"paid"===e.payment_status).length;return Z||P?(0,a.jsx)("div",{className:"page-container items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{className:"body-text-muted",children:"Loading tournament..."})]})}):S?(0,a.jsx)(N.DashboardLayout,{children:(0,a.jsxs)("div",{className:"page-container overflow-y-auto",children:[(0,a.jsxs)("nav",{className:"flex items-center gap-1 body-text-muted mb-4 flex-shrink-0 flex-wrap",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/"),className:"hover:text-foreground transition-colors flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"icon-xs"})," Home"]}),(0,a.jsx)(m.Z,{className:"icon-xs"}),(0,a.jsx)("button",{onClick:()=>e.push("/tournaments"),className:"hover:text-foreground transition-colors",children:"Tournaments"}),(0,a.jsx)(m.Z,{className:"icon-xs"}),(0,a.jsx)("span",{className:"text-foreground truncate max-w-[200px]",children:S.title})]}),(0,a.jsxs)("div",{className:"page-header",children:[(0,a.jsxs)("div",{className:"page-title-section",children:[(0,a.jsx)("h1",{className:"page-title",children:S.title}),(0,a.jsx)("p",{className:"page-subtitle",children:"Manage tournament details, participants, and registrations."})]}),(0,a.jsx)("div",{className:"page-actions",children:(0,a.jsxs)("button",{className:"btn-secondary text-sm",onClick:()=>{let e=new Blob([[["Team/Player","Contact","Email","Phone","Registered","Status","Payment","Waiver"],...E.map(e=>{var t,s,a,l,n;return[null!==(s=null!==(t=e.team_name)&&void 0!==t?t:e.contact_name)&&void 0!==s?s:e.team_id,null!==(a=e.contact_name)&&void 0!==a?a:"",null!==(l=e.contact_email)&&void 0!==l?l:"",null!==(n=e.contact_phone)&&void 0!==n?n:"",H(e.created_at),e.status,e.payment_status,e.waiver_signed?"Yes":"No"]})].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="registrations-".concat(t.slice(0,8),".csv"),a.click(),URL.revokeObjectURL(s)},children:[(0,a.jsx)(x.Z,{className:"icon-sm"})," Export CSV"]})})]}),(0,a.jsx)("div",{className:"content-card content-card-padding mb-4 flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-52 h-32 rounded-xl flex-shrink-0 overflow-hidden border border-border bg-gradient-to-br from-blue-900/20 to-purple-900/20 flex items-center justify-center",children:S.banner_image_url?(0,a.jsx)("img",{src:S.banner_image_url,alt:S.title,className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground/40",children:[(0,a.jsx)(u.Z,{className:"w-8 h-8"}),(0,a.jsx)("span",{className:"text-xs",children:"No banner"})]})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"section-title",children:"Tournament Details"}),(0,a.jsx)("span",{className:"text-xs font-semibold px-3 py-1 rounded-full\n                  ".concat(v[S.status]),children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"body-text-muted mb-1",children:"Start"}),(0,a.jsx)("p",{className:"body-text font-medium text-sm",children:I(S.start_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"body-text-muted mb-1",children:"End"}),(0,a.jsx)("p",{className:"body-text font-medium text-sm",children:I(S.end_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"body-text-muted mb-1",children:"Registrations"}),(0,a.jsx)("p",{className:"stat-value-large",children:E.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"body-text-muted mb-1",children:"Confirmed"}),(0,a.jsx)("p",{className:"stat-value-large text-green-400",children:K})]})]})]})]})}),(0,a.jsx)("div",{className:"stats-grid mb-4 flex-shrink-0",children:[{label:"Total",value:E.length,color:"icon-blue",icon:(0,a.jsx)(h.Z,{className:"icon-md text-blue-400"})},{label:"Confirmed",value:K,color:"icon-green",icon:(0,a.jsx)(c.Z,{className:"icon-md text-green-400"})},{label:"Pending",value:M,color:"icon-yellow",icon:(0,a.jsx)(r.Z,{className:"icon-md text-yellow-400"})},{label:"Paid",value:V,color:"icon-emerald",icon:(0,a.jsx)(j.Z,{className:"icon-md text-emerald-400"})}].map(e=>{let{label:t,value:s,color:l,icon:n}=e;return(0,a.jsx)("div",{className:"stat-card",children:(0,a.jsx)("div",{className:"stat-card-content",children:(0,a.jsx)("div",{className:"stat-card-layout",children:(0,a.jsxs)("div",{className:"stat-card-left",children:[(0,a.jsx)("div",{className:"stat-card-icon ".concat(l),children:n}),(0,a.jsxs)("div",{className:"stat-card-text",children:[(0,a.jsx)("p",{className:"stat-label",children:t}),(0,a.jsx)("p",{className:"stat-value-large",children:s})]})]})})})},t)})}),(0,a.jsxs)("div",{className:"full-height-card flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-4 border-b border-border flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"icon-md text-muted-foreground"}),(0,a.jsx)("h3",{className:"section-title",children:"Registrations"}),!T&&(0,a.jsx)("span",{className:"text-xs bg-muted text-muted-foreground px-2 py-0.5 rounded-full",children:J.length})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 icon-sm text-muted-foreground"}),(0,a.jsx)("input",{className:"input-field pl-9 py-2 text-sm w-48",placeholder:"Search teams...",value:A,onChange:e=>O(e.target.value)})]}),(0,a.jsxs)("select",{className:"select-field py-2 text-sm w-36",value:W,onChange:e=>B(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"canceled",children:"Canceled"})]})]})]}),(0,a.jsx)("div",{className:"overflow-auto flex-1",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"table-header sticky top-0",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"table-cell table-header-text text-left",children:"Team / Player"}),(0,a.jsx)("th",{className:"table-cell table-header-text text-left",children:"Contact"}),(0,a.jsx)("th",{className:"table-cell table-header-text text-left",children:"Registered"}),(0,a.jsx)("th",{className:"table-cell table-header-text text-left",children:"Status"}),(0,a.jsx)("th",{className:"table-cell table-header-text text-left",children:"Payment"}),(0,a.jsx)("th",{className:"table-cell table-header-text text-center",children:"Waiver"})]})}),(0,a.jsx)("tbody",{children:T?[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("tr",{className:"table-row animate-pulse",children:[...Array(6)].map((e,t)=>(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-full max-w-[120px]"})},t))},t)):0===J.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"table-cell text-center py-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-10 h-10 text-muted-foreground/20"}),(0,a.jsx)("p",{className:"body-text-muted",children:0===E.length?"No registrations yet for this tournament.":"No registrations match your filters."})]})})}):J.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"table-row",children:[(0,a.jsxs)("td",{className:"table-cell",children:[(0,a.jsx)("p",{className:"table-cell-text font-medium",children:null!==(s=null!==(t=e.team_name)&&void 0!==t?t:e.contact_name)&&void 0!==s?s:"—"}),e.team_name&&e.contact_name&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.contact_name})]}),(0,a.jsxs)("td",{className:"table-cell",children:[e.contact_email&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.contact_email}),e.contact_phone&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.contact_phone}),!e.contact_email&&!e.contact_phone&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"—"})]}),(0,a.jsx)("td",{className:"table-cell body-text-muted text-sm",children:H(e.created_at)}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs font-semibold\n                          px-2.5 py-1 rounded-full ".concat(y[e.status]),children:[_[e.status],e.status.charAt(0).toUpperCase()+e.status.slice(1)]})}),(0,a.jsx)("td",{className:"table-cell",children:(0,a.jsx)("span",{className:"text-xs font-semibold px-2.5 py-1 rounded-full\n                          ".concat(w[e.payment_status]),children:e.payment_status.charAt(0).toUpperCase()+e.payment_status.slice(1)})}),(0,a.jsx)("td",{className:"table-cell text-center",children:e.waiver_signed?(0,a.jsx)(c.Z,{className:"w-4 h-4 text-green-400 mx-auto"}):(0,a.jsx)(d.Z,{className:"w-4 h-4 text-red-400/50 mx-auto"})})]},e.id)})})]})})]})]})}):(0,a.jsx)("div",{className:"page-container items-center justify-center",children:(0,a.jsxs)("div",{className:"content-card content-card-padding text-center max-w-sm",children:[(0,a.jsx)(i.Z,{className:"w-10 h-10 text-muted-foreground/30 mx-auto mb-3"}),(0,a.jsx)("p",{className:"body-text-muted mb-4",children:"Tournament not found."}),(0,a.jsx)("button",{className:"btn-primary",onClick:()=>e.push("/tournaments"),children:"Back to Tournaments"})]})})}}},function(e){e.O(0,[7861,5585,8290,6877,2971,2117,1744],function(){return e(e.s=84543)}),_N_E=e.O()}]);