(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{78017:function(e,t,n){Promise.resolve().then(n.bind(n,45210)),Promise.resolve().then(n.bind(n,23579)),Promise.resolve().then(n.bind(n,8823)),Promise.resolve().then(n.t.bind(n,47960,23)),Promise.resolve().then(n.bind(n,25922)),Promise.resolve().then(n.t.bind(n,51336,23)),Promise.resolve().then(n.t.bind(n,92812,23)),Promise.resolve().then(n.t.bind(n,9502,23))},45210:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return i}});var r=n(57437),o=n(2265),c=n(99376);let s=(0,o.createContext)({isAuthenticated:!1}),i=e=>{let{children:t}=e,[n,i]=(0,o.useState)(!1),a=(0,c.useRouter)();return(0,o.useEffect)(()=>{let e=localStorage.getItem("jwtToken"),t=localStorage.getItem("tokenExpiration");console.log(t),!e||!t||new Date().getTime()>Number(t)?(localStorage.removeItem("jwtToken"),localStorage.removeItem("tokenExpiration"),i(!1),a.push("/login")):i(!0)},[]),(0,r.jsx)(s.Provider,{value:{isAuthenticated:n},children:t})}},23579:function(e,t,n){"use strict";n.d(t,{SocketProvider:function(){return u},s:function(){return a}});var r=n(57437),o=n(38303),c=n(2265),s=n(68680);let i=(0,c.createContext)(void 0),a=()=>{let e=(0,c.useContext)(i);if(!e)throw Error("useSocket must be used within a SocketProvider");return e},u=e=>{let{children:t}=e,[n,a]=(0,c.useState)(null),[u,l]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{console.log("\uD83D\uDD0C Creating single socket connection..."),console.log("Trying to connect ".concat(o.o5));let e=(0,s.io)("".concat(o.o5),{transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:2e3,timeout:2e4});return e.on("connect",()=>{console.log("✅ Socket connected:",e.id),l(!0)}),e.on("disconnect",e=>{console.log("❌ Socket disconnected:",e),l(!1)}),e.on("connect_error",e=>{console.error("\uD83D\uDCA5 Connection error:",e),l(!1)}),a(e),()=>{console.log("\uD83E\uDDF9 Cleaning up socket..."),e.close()}},[]),(0,r.jsx)(i.Provider,{value:{socket:n,isConnected:u,joinVendor:e=>{(null==n?void 0:n.connected)?(console.log("\uD83C\uDFEA Joining vendor room: ".concat(e)),n.emit("dashboard_join_vendor",{vendor_id:e})):console.warn("⚠️ Cannot join vendor, socket not connected")}},children:t})}},8823:function(e,t,n){"use strict";n.d(t,{SubscriptionProvider:function(){return a},m:function(){return u}});var r=n(57437),o=n(2265),c=n(99376),s=n(29116);let i=(0,o.createContext)({status:null,loading:!0,vendorId:null,isLocked:!1,checkSubscription:async()=>{},refreshStatus:async()=>{}});function a(e){let{children:t}=e,[n,a]=(0,o.useState)(null),[u,l]=(0,o.useState)(!1),[d,m]=(0,o.useState)(null);(0,c.useRouter)();let f=(0,c.usePathname)();(0,o.useEffect)(()=>{let e=localStorage.getItem("selectedCafe");e&&"master"!==e?m(parseInt(e)):m(null)},[f]);let h=async()=>{if(!d||d<=0){l(!1);return}if("master"===localStorage.getItem("selectedCafe")){a({is_active:!0,locked:!1,message:"Master access"}),l(!1);return}if(["/subscription","/login","/select-cafe"].some(e=>null==f?void 0:f.includes(e))){l(!1);return}try{l(!0);let e=await s.h.checkStatus(d);a(e)}catch(e){console.error("Failed to check subscription:",e),a({is_active:!0,locked:!1,message:"Check failed"})}finally{l(!1)}},v=async()=>{await h()};(0,o.useEffect)(()=>{d&&(null==f?void 0:f.includes("/dashboard"))&&h()},[d,f]);let p=!!((null==n?void 0:n.locked)&&d);return(0,r.jsx)(i.Provider,{value:{status:n,loading:u,vendorId:d,isLocked:p,checkSubscription:h,refreshStatus:v},children:t})}let u=()=>(0,o.useContext)(i)},29116:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(38303);async function o(e,t){try{let n=e.includes("?")?"&":"?",o="".concat(r.m7).concat(e).concat(n,"t=").concat(Date.now()),c=await fetch(o,{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},credentials:"omit"}),s=c.headers.get("content-type");if(!s||!s.includes("application/json"))throw Error("Non-JSON response: ".concat(c.status," ").concat(c.statusText));let i=await c.json();if(!c.ok)throw Error(i.error||i.message||"Request failed: ".concat(c.status));return i}catch(t){if(console.error("API call failed:",e,t),t.message.includes("Failed to fetch"))throw Error("Network error. Please check your connection.");throw t}}let c={checkStatus:e=>o("/api/vendors/".concat(e,"/subscription/status")),getSubscription:e=>o("/api/vendors/".concat(e,"/subscription/")),getPackages:()=>o("/api/packages"),createOrder:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"new";return o("/api/vendors/".concat(e,"/subscription/create-order"),{method:"POST",body:JSON.stringify({package_code:t,action:n})})},verifyPayment:(e,t)=>o("/api/vendors/".concat(e,"/subscription/verify-payment"),{method:"POST",body:JSON.stringify(t)}),getHistory:e=>o("/api/vendors/".concat(e,"/subscription/history"))}},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},40257:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(44227)},44227:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function c(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===c||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:c}catch(e){t=c}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a=[],u=!1,l=-1;function d(){u&&r&&(u=!1,r.length?a=r.concat(a):l=-1,a.length&&m())}function m(){if(!u){var e=i(d);u=!0;for(var t=a.length;t;){for(r=a,a=[];++l<t;)r&&r[l].run();l=-1,t=a.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new f(e,t)),1!==a.length||u||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var c=n[e]={exports:{}},s=!0;try{t[e](c,c.exports,r),s=!1}finally{s&&delete n[e]}return c.exports}r.ab="//";var o=r(229);e.exports=o}()},38303:function(e,t,n){"use strict";n.d(t,{NV:function(){return s},ZE:function(){return c},m7:function(){return o},o5:function(){return a},o8:function(){return i},yj:function(){return u}});var r=n(40257);let o=r.env.NEXT_PUBLIC_DASHBOARD_URL,c=r.env.NEXT_PUBLIC_LOGIN_URL;r.env.NEXT_PUBLIC_USER_ONBOARD;let s=r.env.NEXT_PUBLIC_VENDOR_ONBOARD,i=r.env.NEXT_PUBLIC_BOOKING_URL,a=r.env.NEXT_PUBLIC_SOCKET_DASHBOARD_URL,u=r.env.NEXT_PUBLIC_RAZORPAY_KEY_ID||"rzp_test_viVAhwtbVdu1X4"},47960:function(){},9502:function(){},51336:function(e){e.exports={style:{fontFamily:"'__Manrope_73ee6c', '__Manrope_Fallback_73ee6c'",fontStyle:"normal"},className:"__className_73ee6c",variable:"__variable_73ee6c"}},92812:function(e){e.exports={style:{fontFamily:"'__Space_Grotesk_dd5b2f', '__Space_Grotesk_Fallback_dd5b2f'",fontStyle:"normal"},className:"__className_dd5b2f",variable:"__variable_dd5b2f"}},25922:function(e,t,n){"use strict";n.d(t,{F:function(){return l},ThemeProvider:function(){return d}});var r=n(2265),o=(e,t,n,r,o,c,s,i)=>{let a=document.documentElement,u=["light","dark"];function l(t){(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&c?o.map(e=>c[e]||e):o;n?(a.classList.remove(...r),a.classList.add(t)):a.setAttribute(e,t)}),i&&u.includes(t)&&(a.style.colorScheme=t)}if(r)l(r);else try{let e=localStorage.getItem(t)||n,r=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;l(r)}catch(e){}},c=["light","dark"],s="(prefers-color-scheme: dark)",i="undefined"==typeof window,a=r.createContext(void 0),u={setTheme:e=>{},themes:[]},l=()=>{var e;return null!=(e=r.useContext(a))?e:u},d=e=>r.useContext(a)?r.createElement(r.Fragment,null,e.children):r.createElement(f,{...e}),m=["light","dark"],f=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:o=!0,enableColorScheme:i=!0,storageKey:u="theme",themes:l=m,defaultTheme:d=o?"system":"light",attribute:f="data-theme",value:g,children:_,nonce:b,scriptProps:S}=e,[k,T]=r.useState(()=>v(u,d)),[w,E]=r.useState(()=>v(u)),C=g?Object.values(g):l,P=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=y());let r=g?g[t]:t,s=n?p(b):null,a=document.documentElement,u=e=>{"class"===e?(a.classList.remove(...C),r&&a.classList.add(r)):e.startsWith("data-")&&(r?a.setAttribute(e,r):a.removeAttribute(e))};if(Array.isArray(f)?f.forEach(u):u(f),i){let e=c.includes(d)?d:null,n=c.includes(t)?t:e;a.style.colorScheme=n}null==s||s()},[b]),N=r.useCallback(e=>{let t="function"==typeof e?e(k):e;T(t);try{localStorage.setItem(u,t)}catch(e){}},[k]),L=r.useCallback(e=>{E(y(e)),"system"===k&&o&&!t&&P("system")},[k,t]);r.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(L),L(e),()=>e.removeListener(L)},[L]),r.useEffect(()=>{let e=e=>{e.key===u&&(e.newValue?T(e.newValue):N(d))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[N]),r.useEffect(()=>{P(null!=t?t:k)},[t,k]);let x=r.useMemo(()=>({theme:k,setTheme:N,forcedTheme:t,resolvedTheme:"system"===k?w:k,themes:o?[...l,"system"]:l,systemTheme:o?w:void 0}),[k,N,t,w,o,l]);return r.createElement(a.Provider,{value:x},r.createElement(h,{forcedTheme:t,storageKey:u,attribute:f,enableSystem:o,enableColorScheme:i,defaultTheme:d,value:g,themes:l,nonce:b,scriptProps:S}),_)},h=r.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:c,enableSystem:s,enableColorScheme:i,defaultTheme:a,value:u,themes:l,nonce:d,scriptProps:m}=e,f=JSON.stringify([c,n,a,t,l,u,s,i]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:"(".concat(o.toString(),")(").concat(f,")")}})}),v=(e,t)=>{let n;if(!i){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},p=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")}},function(e){e.O(0,[3587,6687,8680,2971,2117,1744],function(){return e(e.s=78017)}),_N_E=e.O()}]);