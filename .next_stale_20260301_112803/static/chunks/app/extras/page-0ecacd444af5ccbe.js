(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1779],{17267:function(e,a,t){Promise.resolve().then(t.bind(t,42357)),Promise.resolve().then(t.bind(t,22843))},22843:function(e,a,t){"use strict";t.d(a,{default:function(){return v}});var s=t(57437),n=t(2265),i=t(83464),r=t(66070),c=t(62869),d=t(95186),l=t(26815),o=t(26110),m=t(51817),x=t(38553),u=t(53305),h=t(18930),p=t(26937),j=t(45675),f=t(38303);function g(){return(0,s.jsx)(m.Z,{className:"animate-spin h-4 w-4 text-emerald-500"})}let y=localStorage.getItem("selectedCafe");function v(){let[e,a]=(0,n.useState)([]),[t,c]=(0,n.useState)(!1),[d,l]=(0,n.useState)(null),[o,m]=(0,n.useState)(null),p=async()=>{c(!0);try{let e=await i.Z.get("".concat(f.m7,"/api/vendor/").concat(y,"/extras/categories"));a(e.data)}catch(e){}finally{c(!1)}};(0,n.useEffect)(()=>{p()},[]);let j=async(e,a)=>{try{await i.Z.post("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category"),e),p(),a()}catch(e){}},v=async(e,a,t)=>{try{await i.Z.put("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category/").concat(e),a),p(),t()}catch(e){}},S=async e=>{if(window.confirm("Are you sure you want to delete this category? All associated menus will also be deleted.")){l(e);try{await i.Z.delete("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category/").concat(e)),p()}catch(e){}finally{l(null)}}},Z=async(e,a,t)=>{try{await i.Z.post("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category/").concat(e,"/menu"),a),p(),t()}catch(e){}},z=async(e,a,t,s)=>{try{await i.Z.put("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category/").concat(e,"/menu/").concat(a),t),p(),s()}catch(e){}},_=async(e,a)=>{if(window.confirm("Are you sure you want to delete this menu item?")){m(a);try{await i.Z.delete("".concat(f.m7,"/api/vendor/").concat(y,"/extras/category/").concat(e,"/menu/").concat(a)),p()}catch(e){}finally{m(null)}}};return(0,s.jsxs)("main",{className:"max-w-6xl mx-auto p-4",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"text-emerald-600 w-8 h-8"}),"Manage Extra Services"]}),(0,s.jsx)(N,{onSave:j})]}),t?(0,s.jsx)("div",{className:"flex w-full justify-center py-16",children:(0,s.jsx)(g,{})}):0===e.length?(0,s.jsx)("div",{className:"p-6 rounded-lg border border-dashed border-gray-300 bg-gray-50 text-gray-400 text-center",children:"No categories found. Add one to get started."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,s.jsxs)(r.Zb,{className:"bg-white dark:bg-gray-900 shadow-md border",children:[(0,s.jsxs)(r.Ol,{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold text-lg",children:e.name}),e.description&&(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(b,{category:e,onSave:v}),(0,s.jsx)("button",{onClick:()=>S(e.id),className:"p-2 hover:text-rose-600","aria-label":"Delete category ".concat(e.name),type:"button",disabled:d===e.id,children:d===e.id?(0,s.jsx)(g,{}):(0,s.jsx)(h.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)(r.aY,{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"flex justify-end mb-2",children:(0,s.jsx)(w,{categoryId:e.id,onSave:Z})}),0===e.menus.length?(0,s.jsx)("div",{className:"italic text-gray-400 text-sm text-center py-6",children:"No menu items in this category."}):(0,s.jsx)("ul",{className:"space-y-1",children:e.menus.map(a=>(0,s.jsxs)("li",{className:"flex justify-between items-center p-2 rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:a.name}),a.description&&(0,s.jsx)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:a.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-emerald-700 dark:text-emerald-300 font-semibold",children:["₹",a.price]}),(0,s.jsx)(C,{categoryId:e.id,menu:a,onSave:z}),(0,s.jsx)("button",{onClick:()=>_(e.id,a.id),className:"p-2 hover:text-rose-600","aria-label":"Delete menu ".concat(a.name),type:"button",disabled:o===a.id,children:o===a.id?(0,s.jsx)(g,{}):(0,s.jsx)(h.Z,{className:"w-5 h-5"})})]})]},a.id))})]})]},e.id))})]})}function N(e){let{onSave:a}=e,[t,i]=(0,n.useState)(!1),[r,m]=(0,n.useState)({name:"",description:""}),[x,u]=(0,n.useState)(!1),h=async e=>{e.preventDefault(),r.name.trim()&&(u(!0),await a(r,()=>{i(!1),m({name:"",description:""})}),u(!1))};return(0,s.jsxs)(o.Vq,{open:t,onOpenChange:i,children:[(0,s.jsx)(o.hg,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"outline",className:"flex items-center gap-2 px-4",children:[(0,s.jsx)(p.Z,{}),"New Category"]})}),(0,s.jsxs)(o.cZ,{children:[(0,s.jsx)(o.$N,{children:"Add New Category"}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"category-name",children:"Name"}),(0,s.jsx)(d.I,{id:"category-name",value:r.name,onChange:e=>m(a=>({...a,name:e.target.value})),required:!0,placeholder:"Category Name",disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"category-desc",children:"Description (optional)"}),(0,s.jsx)(d.I,{id:"category-desc",value:r.description,onChange:e=>m(a=>({...a,description:e.target.value})),placeholder:"Description",disabled:x})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"outline",disabled:x,children:"Cancel"})}),(0,s.jsx)(c.z,{type:"submit",disabled:x,children:x?(0,s.jsx)(g,{}):"Add"})]})]})]})]})}function b(e){let{category:a,onSave:t}=e,[i,r]=(0,n.useState)(!1),[m,x]=(0,n.useState)({name:a.name,description:a.description||""}),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{x({name:a.name,description:a.description||""})},[a]);let p=async e=>{e.preventDefault(),m.name.trim()&&(h(!0),await t(a.id,m,()=>r(!1)),h(!1))};return(0,s.jsxs)(o.Vq,{open:i,onOpenChange:r,children:[(0,s.jsx)(o.hg,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"ghost",size:"icon","aria-label":"Edit category ".concat(a.name),children:(0,s.jsx)(j.Z,{className:"w-4 h-4 text-emerald-600"})})}),(0,s.jsxs)(o.cZ,{children:[(0,s.jsx)(o.$N,{children:"Edit Category"}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"edit-category-name",children:"Name"}),(0,s.jsx)(d.I,{id:"edit-category-name",value:m.name,onChange:e=>x(a=>({...a,name:e.target.value})),required:!0,placeholder:"Category Name",disabled:u})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"edit-category-desc",children:"Description (optional)"}),(0,s.jsx)(d.I,{id:"edit-category-desc",value:m.description,onChange:e=>x(a=>({...a,description:e.target.value})),placeholder:"Description",disabled:u})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"outline",disabled:u,children:"Cancel"})}),(0,s.jsx)(c.z,{type:"submit",disabled:u,children:u?(0,s.jsx)(g,{}):"Save"})]})]})]})]})}function w(e){let{categoryId:a,onSave:t}=e,[i,r]=(0,n.useState)(!1),[m,x]=(0,n.useState)({name:"",price:"",description:""}),[u,h]=(0,n.useState)(!1),j=parseFloat(m.price),f=async e=>{e.preventDefault(),m.name.trim()&&j&&!(j<=0)&&(h(!0),await t(a,{name:m.name.trim(),price:j,description:m.description.trim()},()=>{r(!1),x({name:"",price:"",description:""})}),h(!1))};return(0,s.jsxs)(o.Vq,{open:i,onOpenChange:r,children:[(0,s.jsx)(o.hg,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"outline",size:"sm",className:"flex items-center gap-2 px-3",children:[(0,s.jsx)(p.Z,{}),"Add Menu"]})}),(0,s.jsxs)(o.cZ,{children:[(0,s.jsx)(o.$N,{children:"Add Menu Item"}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"menu-name",children:"Name"}),(0,s.jsx)(d.I,{id:"menu-name",value:m.name,onChange:e=>x(a=>({...a,name:e.target.value})),placeholder:"Menu Item Name",required:!0,disabled:u})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"menu-price",children:"Price (₹)"}),(0,s.jsx)(d.I,{id:"menu-price",type:"number",min:1,step:.01,value:m.price,onChange:e=>x(a=>({...a,price:e.target.value})),placeholder:"Price",required:!0,disabled:u})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"menu-desc",children:"Description (optional)"}),(0,s.jsx)(d.I,{id:"menu-desc",value:m.description,onChange:e=>x(a=>({...a,description:e.target.value})),placeholder:"Description",disabled:u})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"outline",disabled:u,children:"Cancel"})}),(0,s.jsx)(c.z,{type:"submit",disabled:u,children:u?(0,s.jsx)(g,{}):"Add"})]})]})]})]})}function C(e){let{categoryId:a,menu:t,onSave:i}=e,[r,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)({name:t.name,price:String(t.price),description:t.description||""}),[h,p]=(0,n.useState)(!1),f=parseFloat(x.price);(0,n.useEffect)(()=>{u({name:t.name,price:String(t.price),description:t.description||""})},[t]);let y=async e=>{e.preventDefault(),x.name.trim()&&f&&!(f<=0)&&(p(!0),await i(a,t.id,{name:x.name.trim(),price:f,description:x.description.trim()},()=>m(!1)),p(!1))};return(0,s.jsxs)(o.Vq,{open:r,onOpenChange:m,children:[(0,s.jsx)(o.hg,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"ghost",size:"icon","aria-label":"Edit menu item ".concat(t.name),children:(0,s.jsx)(j.Z,{className:"w-4 h-4 text-emerald-600"})})}),(0,s.jsxs)(o.cZ,{children:[(0,s.jsx)(o.$N,{children:"Edit Menu Item"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"edit-menu-name",children:"Name"}),(0,s.jsx)(d.I,{id:"edit-menu-name",value:x.name,onChange:e=>u(a=>({...a,name:e.target.value})),required:!0,disabled:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"edit-menu-price",children:"Price (₹)"}),(0,s.jsx)(d.I,{id:"edit-menu-price",type:"number",min:1,step:.01,value:x.price,onChange:e=>u(a=>({...a,price:e.target.value})),required:!0,disabled:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l._,{htmlFor:"edit-menu-desc",children:"Description (optional)"}),(0,s.jsx)(d.I,{id:"edit-menu-desc",value:x.description,onChange:e=>u(a=>({...a,description:e.target.value})),disabled:h})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(o.GG,{asChild:!0,children:(0,s.jsx)(c.z,{variant:"outline",disabled:h,children:"Cancel"})}),(0,s.jsx)(c.z,{type:"submit",disabled:h,children:h?(0,s.jsx)(g,{}):"Save"})]})]})]})]})}},26110:function(e,a,t){"use strict";t.d(a,{$N:function(){return j},Be:function(){return f},GG:function(){return m},Vq:function(){return d},cN:function(){return p},cZ:function(){return u},fK:function(){return h},hg:function(){return l}});var s=t(57437),n=t(2265),i=t(49027),r=t(32489),c=t(94508);let d=i.fC,l=i.xz,o=i.h_,m=i.x8,x=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.aV,{ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});x.displayName=i.aV.displayName;let u=n.forwardRef((e,a)=>{let{className:t,children:n,...d}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(i.VY,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[n,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.VY.displayName;let h=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};h.displayName="DialogHeader";let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="DialogFooter";let j=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.Dx,{ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});j.displayName=i.Dx.displayName;let f=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.dk,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});f.displayName=i.dk.displayName},26815:function(e,a,t){"use strict";t.d(a,{_:function(){return l}});var s=t(57437),n=t(2265),i=t(6394),r=t(90535),c=t(94508);let d=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.f,{ref:a,className:(0,c.cn)(d(),t),...n})});l.displayName=i.f.displayName}},function(e){e.O(0,[7861,5585,7514,2957,6890,9027,1240,2224,2971,2117,1744],function(){return e(e.s=17267)}),_N_E=e.O()}]);