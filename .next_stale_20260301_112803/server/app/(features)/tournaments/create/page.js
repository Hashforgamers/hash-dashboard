(()=>{var e={};e.id=31,e.ids=[31],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},66072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(17299),s(23027),s(90996),s(74527);var a=s(30170),r=s(45002),l=s(83876),i=s.n(l),n=s(66299),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(features)",{children:["tournaments",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17299)),"/Users/bhanujoshi/Documents/Hash/hash-dashboard/app/(features)/tournaments/create/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,23027)),"/Users/bhanujoshi/Documents/Hash/hash-dashboard/app/(features)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,74527)),"/Users/bhanujoshi/Documents/Hash/hash-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bhanujoshi/Documents/Hash/hash-dashboard/app/(features)/tournaments/create/page.tsx"],u="/(features)/tournaments/create/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(features)/tournaments/create/page",pathname:"/tournaments/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4285:(e,t,s)=>{Promise.resolve().then(s.bind(s,37925))},37925:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(97247),r=s(28964),l=s(34178),i=s(30938),n=s(67636);let o=(0,s(26323).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var c=s(37013),d=s(70405),u=s(18007),m=s(74570),p=s(9054);s(41688);var x=s(61809);function h({selected:e,onSelect:t,minDate:s}){let[l,o]=(0,r.useState)(e??new Date),c=l.getFullYear(),d=l.getMonth(),u=new Date(c,d,1).getDay(),m=new Date(c,d+1,0).getDate();return(0,a.jsxs)("div",{className:"bg-card border border-border rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("button",{className:"btn-icon",onClick:()=>o(new Date(c,d-1,1)),children:a.jsx(i.Z,{className:"icon-sm"})}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:l.toLocaleString("default",{month:"long",year:"numeric"})}),a.jsx("button",{className:"btn-icon",onClick:()=>o(new Date(c,d+1,1)),children:a.jsx(n.Z,{className:"icon-sm"})})]}),a.jsx("div",{className:"grid grid-cols-7 mb-1",children:["S","M","T","W","T","F","S"].map((e,t)=>a.jsx("div",{className:"text-center text-xs text-muted-foreground py-1",children:e},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-y-1",children:[Array.from({length:u}).map((e,t)=>a.jsx("div",{},`e${t}`)),Array.from({length:m},(r,l)=>{let i=l+1,n=new Date(c,d,i),o=e?.toDateString()===n.toDateString(),u=!!s&&n<new Date(s.getFullYear(),s.getMonth(),s.getDate());return a.jsx("button",{disabled:u,onClick:()=>t(n),className:`w-8 h-8 mx-auto rounded-full text-sm transition-colors
                ${o?"bg-primary text-primary-foreground font-bold":""}
                ${o||u?"":"hover:bg-muted text-foreground"}
                ${u?"text-muted-foreground/30 cursor-not-allowed":""}
              `,children:i},i)})]})]})}function b({preview:e,uploading:t,onFileSelect:s,onRemove:l}){let i=(0,r.useRef)(null);return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"form-label block",children:"Event Banner"}),a.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Recommended: 1200\xd7630px — PNG, JPG or WEBP. Stored on Cloudinary."}),e?(0,a.jsxs)("div",{className:"relative w-full rounded-xl overflow-hidden border border-border group",style:{aspectRatio:"1200/630"},children:[a.jsx("img",{src:e,alt:"Banner preview",className:"w-full h-full object-cover"}),!t&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[(0,a.jsxs)("button",{type:"button",className:"btn-secondary text-xs",onClick:()=>i.current?.click(),children:[a.jsx(o,{className:"icon-xs"})," Change Image"]}),(0,a.jsxs)("button",{type:"button",className:"btn-danger text-xs",onClick:l,children:[a.jsx(c.Z,{className:"icon-xs"})," Remove"]})]}),t&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-white text-xs font-medium",children:"Uploading to Cloudinary..."})]})]}):a.jsx("div",{className:`w-full rounded-xl border-2 border-dashed transition-all cursor-pointer
            flex flex-col items-center justify-center gap-3 py-16
            ${t?"border-primary/40 bg-primary/5 cursor-not-allowed":"border-border hover:border-primary/50 hover:bg-primary/5"}`,onClick:()=>!t&&i.current?.click(),onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let t=e.dataTransfer.files?.[0];t&&t.type.startsWith("image/")&&s(t)},children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"body-text-muted text-sm",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"icon-blue p-4 rounded-2xl",children:a.jsx(d.Z,{className:"w-8 h-8 text-blue-400"})}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"body-text font-medium",children:"Click to upload or drag & drop"}),a.jsx("p",{className:"body-text-muted text-xs mt-1",children:"PNG, JPG, WEBP — max 10MB"})]}),(0,a.jsxs)("button",{type:"button",className:"btn-secondary text-sm pointer-events-none",children:[a.jsx(o,{className:"icon-sm"})," Browse Files"]})]})}),a.jsx("input",{ref:i,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&s(t),e.target.value=""}})]})}let g={start:"Start Date",end:"End Date",deadline:"Reg. Deadline"};function y(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(null),{token:i,loading:n}=(0,m.K)(t),[o,c]=(0,r.useState)({title:"",description:"",status:"draft",currency:"INR",registration_fee:"0",capacity_team:"",capacity_player:"",min_team_size:5,max_team_size:5,allow_solo:!1,allow_individual:!1,visibility:!0}),[d,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),[_,w]=(0,r.useState)("start"),[k,S]=(0,r.useState)(null),[D,C]=(0,r.useState)(null),[P,q]=(0,r.useState)(null),[M,R]=(0,r.useState)(!1),[z,E]=(0,r.useState)(!1),[I,U]=(0,r.useState)(""),F=(e,t)=>c(s=>({...s,[e]:t})),T=async()=>{P&&i&&await (0,p.p2)(i,P).catch(console.error),S(null),C(null),q(null)},Z={start:d,end:j,deadline:v},A=async()=>{if(!i)return U("Session not ready. Please wait a moment.");if(!o.title.trim())return U("Tournament name is required.");if(!d)return U("Start date is required.");if(!j)return U("End date is required.");if(j<d)return U("End date must be after start date.");if(o.min_team_size>o.max_team_size)return U("Min team size cannot exceed max team size.");if(v&&v>=d)return U("Registration deadline must be before start date.");E(!0),U("");try{let t,s;if(k){R(!0);let e=await (0,p.ZK)(i,k,o.title.trim());R(!1),t=e.url,s=e.public_id,q(e.public_id)}let a=await (0,p.yM)(i,{title:o.title.trim(),description:o.description.trim()||void 0,start_at:d.toISOString(),end_at:j.toISOString(),registration_deadline:v?.toISOString(),registration_fee:parseFloat(o.registration_fee)||0,currency:o.currency,capacity_team:o.capacity_team?parseInt(o.capacity_team):void 0,capacity_player:o.capacity_player?parseInt(o.capacity_player):void 0,min_team_size:o.min_team_size,max_team_size:o.max_team_size,allow_solo:o.allow_solo,allow_individual:o.allow_individual,visibility:o.visibility,status:o.status,banner_image_url:t,banner_public_id:s});e.push(`/tournaments/${a.id}`)}catch(e){R(!1),U(e instanceof Error?e.message:"Something went wrong.")}finally{E(!1)}},G=z||M;return a.jsx(x.DashboardLayout,{children:a.jsx("div",{className:"page-container overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto w-full pb-10",children:[a.jsx("div",{className:"page-header",children:(0,a.jsxs)("div",{className:"page-title-section",children:[a.jsx("h1",{className:"page-title",children:"Create New Tournament"}),a.jsx("p",{className:"page-subtitle",children:"Fill in the details below to set up your new eSports event."})]})}),(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsxs)("section",{children:[a.jsx("h2",{className:"section-title mb-1",children:"Event Banner"}),a.jsx("div",{className:"h-px bg-border mb-5"}),a.jsx(b,{preview:D,uploading:M,onFileSelect:e=>{S(e),C(URL.createObjectURL(e)),q(null)},onRemove:T})]}),(0,a.jsxs)("section",{children:[a.jsx("h2",{className:"section-title mb-1",children:"Basic Information"}),a.jsx("div",{className:"h-px bg-border mb-5"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Tournament Name *"}),a.jsx("input",{className:"input-field",placeholder:"e.g., Hash GTA Cup",value:o.title,onChange:e=>F("title",e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Description"}),a.jsx("textarea",{className:"textarea-field",rows:3,placeholder:"e.g., 5v5 GTA single-elim tournament",value:o.description,onChange:e=>F("description",e.target.value)})]}),(0,a.jsxs)("div",{className:"two-col-grid",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Publish Status"}),(0,a.jsxs)("select",{className:"select-field",value:o.status,onChange:e=>F("status",e.target.value),children:[a.jsx("option",{value:"draft",children:"Save as Draft"}),a.jsx("option",{value:"published",children:"Publish Immediately"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Currency"}),(0,a.jsxs)("select",{className:"select-field",value:o.currency,onChange:e=>F("currency",e.target.value),children:[a.jsx("option",{value:"INR",children:"INR — Indian Rupee"}),a.jsx("option",{value:"USD",children:"USD — US Dollar"}),a.jsx("option",{value:"EUR",children:"EUR — Euro"})]})]})]})]})]}),(0,a.jsxs)("section",{children:[a.jsx("h2",{className:"section-title mb-1",children:"Schedule & Logistics"}),a.jsx("div",{className:"h-px bg-border mb-5"}),a.jsx("label",{className:"form-label block mb-3",children:"Tournament Dates *"}),a.jsx("div",{className:"flex gap-2 mb-4 flex-wrap",children:["start","end","deadline"].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>w(e),className:`flex items-center gap-2 btn-secondary text-xs py-2 px-3 transition-all
                    ${_===e?"ring-2 ring-primary":""}
                  `,children:[a.jsx(u.Z,{className:"icon-xs"}),g[e],": ",Z[e]?Z[e].toLocaleDateString():"—"]},e))}),(0,a.jsxs)("div",{className:"two-col-grid items-start",children:[a.jsx(h,{selected:Z[_],onSelect:e=>{"start"===_?(y(e),w("end")):"end"===_?(f(e),w("deadline")):N(e)},minDate:"end"===_?d??void 0:void 0}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Max Teams"}),a.jsx("input",{className:"input-field",type:"number",min:1,placeholder:"e.g., 32",value:o.capacity_team,onChange:e=>F("capacity_team",e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Max Players"}),a.jsx("input",{className:"input-field",type:"number",min:1,placeholder:"e.g., 160",value:o.capacity_player,onChange:e=>F("capacity_player",e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"form-label block",children:"Team Size Range"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"input-field",type:"number",min:1,placeholder:"Min",value:o.min_team_size,onChange:e=>F("min_team_size",parseInt(e.target.value)||1)}),a.jsx("span",{className:"text-muted-foreground font-medium",children:"–"}),a.jsx("input",{className:"input-field",type:"number",min:1,placeholder:"Max",value:o.max_team_size,onChange:e=>F("max_team_size",parseInt(e.target.value)||1)})]})]}),a.jsx("div",{className:"space-y-2 pt-1",children:[{key:"allow_solo",label:"Allow Solo Players"},{key:"allow_individual",label:"Allow Individual Registration"},{key:"visibility",label:"Visible to Public"}].map(({key:e,label:t})=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:o[e],onChange:t=>F(e,t.target.checked),className:"w-4 h-4 rounded accent-primary"}),a.jsx("span",{className:"body-text",children:t})]},e))})]})]})]}),(0,a.jsxs)("section",{children:[a.jsx("h2",{className:"section-title mb-1",children:"Financials"}),a.jsx("div",{className:"h-px bg-border mb-5"}),(0,a.jsxs)("div",{className:"two-col-grid",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"form-label block",children:["Entry / Registration Fee (",o.currency,")"]}),a.jsx("input",{className:"input-field",type:"number",min:0,step:"0.01",placeholder:"e.g., 10",value:o.registration_fee,onChange:e=>F("registration_fee",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"form-label block",children:["Prize Pool (",o.currency,")",a.jsx("span",{className:"text-muted-foreground font-normal text-xs ml-2",children:"(display only)"})]}),a.jsx("input",{className:"input-field opacity-50",type:"number",min:0,placeholder:"e.g., 1000",disabled:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Prize pool is managed separately."})]})]})]}),I&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:a.jsx("p",{className:"text-red-400 text-sm font-medium",children:I})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[a.jsx("button",{className:"btn-secondary",onClick:()=>e.push("/tournaments"),disabled:G,children:"Cancel"}),a.jsx("button",{className:"btn-primary min-w-[10rem] justify-center",onClick:A,disabled:G||n,children:M?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Uploading banner..."]}):z?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating..."]}):"published"===o.status?"Publish Tournament":"Save as Draft"})]})]})]})})})}},18007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},30938:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},70405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},17299:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(45347).createProxy)(String.raw`/Users/bhanujoshi/Documents/Hash/hash-dashboard/app/(features)/tournaments/create/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[0,970,540,381,876],()=>s(66072));module.exports=a})();