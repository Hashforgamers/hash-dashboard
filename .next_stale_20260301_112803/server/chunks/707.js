"use strict";exports.id=707,exports.ids=[707],exports.modules={14707:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(97247),r=t(47751),n=t(34631),o=t(2704),l=t(17818),i=t(79906),c=t(28964),d=t(44597),m=t(52208),u=t(58053),g=t(27757),h=t(95389),x=t(76285),p=t(97792),f=t(8749),y=t(86802),w=t(70170),j=t(67349),v=t(45333),A=t(57797);let N=r.z.object({email:r.z.string().email({message:"Invalid email address"}),password:r.z.string().min(6,{message:"Password must be at least 6 characters long"}).regex(/[a-zA-Z0-9]/,{message:"Password must be alphanumeric"}),parent_type:r.z.string().min(1,{message:"Parent type is required"})});function b(){let e=(0,o.cI)({resolver:(0,n.F)(N),defaultValues:{email:"",password:"",parent_type:"vendor"}}),[s,t]=(0,c.useState)(!1),[r,b]=(0,c.useState)(""),[S,k]=(0,c.useState)(!1),I=(0,c.useRef)(0),{resolvedTheme:P}=(0,A.F)(),[C,E]=(0,c.useState)(!1),Z={id:-1,type:"vendor",email:"dummy@hash.com"},L=()=>{try{localStorage.removeItem("vendors"),localStorage.removeItem("vendor_login_email"),localStorage.removeItem("jwtToken"),localStorage.removeItem("tokenExpiration"),sessionStorage.clear()}catch(e){console.warn("Error clearing session data:",e)}},T=async(e,s,t=3)=>{for(let a=1;a<=t;a++){let r=new AbortController,n=setTimeout(()=>r.abort(),1===a?45e3:2e4);try{1===a&&l.Am.info("Connecting to server... This may take up to 30 seconds.",{duration:8e3,id:"server-connecting"});let t=await fetch(e,{...s,signal:r.signal,headers:{...s.headers,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return clearTimeout(n),l.Am.dismiss("server-connecting"),t.status>=400&&t.status,t}catch(s){if(clearTimeout(n),l.Am.dismiss("server-connecting"),a===t)throw s;let e=1===a?8e3:3e3;l.Am.info(`Connection failed. Retrying in ${e/1e3} seconds...`,{duration:e-500}),await new Promise(s=>setTimeout(s,e))}}};async function _(e){if(S)return;let s=Date.now();if(s-I.current<2e3){l.Am.warning("Please wait before trying again.");return}I.current=s;try{k(!0),t(!0),b(""),L();let s=Date.now(),a=`${v.ZE}/api/login?t=${s}`,r=await T(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password,parent_type:"vendor",timestamp:s})}),n={};try{n=await r.json()}catch{throw Error("Server returned an unexpected response.")}if(!r.ok){let e=n.message||n.error||(401===r.status?"Invalid email or password.":403===r.status?"Access denied.":`Login failed (${r.status}). Please try again.`);b(e),l.Am.error(e);return}if("success"===n.status){let s=n.vendors;if(Array.isArray(s)&&s.length>0){await new Promise(e=>setTimeout(e,100)),localStorage.setItem("vendors",JSON.stringify(s)),localStorage.setItem("vendor_login_email",e.email),localStorage.setItem("vendor_account_email",e.email);let t=function(e){let s={...e,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+3600};function t(e){return btoa(JSON.stringify(e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}let a=t({alg:"HS256",typ:"JWT"}),r=t(s);return`${a}.${r}.dummy_signature`}(Z);localStorage.setItem("jwtToken",t);let a=Date.now()+36e5;localStorage.setItem("tokenExpiration",a.toString()),l.Am.success("Login successful!"),window.location.replace("/select-cafe")}else l.Am.error("No vendors found for this account.")}else{let e=n.message||"Login failed. Please try again.";b(e),l.Am.error(e)}}catch(s){console.error("Login error:",s);let e="Failed to submit the form. Please try again.";"AbortError"===s.name?e="Server is taking too long to respond. Please try again in a moment.":s.message?.includes("503")||s.message?.includes("502")?e="Server is starting up. Please try again in a moment.":s.message?.includes("Failed to fetch")||s.message?.includes("NetworkError")?e="Network connection issue. Please check your internet connection.":s.message?.includes("SSL")||s.message?.includes("certificate")?e="SSL connection issue. Please try again.":s.message&&(e=s.message),b(e),l.Am.error(e)}finally{t(!1),k(!1)}}return a.jsx("div",{className:"premium-shell flex min-h-screen items-center justify-center overflow-hidden p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,a.jsxs)(g.Zb,{className:"premium-card rounded-2xl border shadow-2xl",children:[(0,a.jsxs)(g.Ol,{className:"text-center pb-8",children:[a.jsx("div",{className:"flex justify-center mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[C?a.jsx(d.default,{src:"dark"===P?"/whitehashlogo.png":"/blackhashlogo.png",alt:"Hash for Gamers",width:120,height:120,className:"drop-shadow-2xl"}):a.jsx(d.default,{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"Hash for Gamers",width:120,height:120,className:"drop-shadow-2xl"}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-emerald-400/20 blur-xl animate-pulse"})]})}),a.jsx(g.ll,{className:"premium-heading mb-2 text-3xl font-bold tracking-tight text-foreground",children:"Cafe Control Login"}),a.jsx(g.SZ,{className:"premium-subtle text-base",children:"Enter your operator credentials to access live gaming operations."})]}),(0,a.jsxs)(g.aY,{className:"space-y-6",children:[a.jsx(m.l0,{...e,children:(0,a.jsxs)("form",{onSubmit:e.handleSubmit(_),className:"space-y-6",children:[a.jsx(m.Wi,{control:e.control,name:"email",render:({field:e})=>(0,a.jsxs)(m.xJ,{children:[(0,a.jsxs)(m.lX,{className:"text-foreground font-medium flex items-center gap-2",children:[a.jsx(h.Z,{className:"w-4 h-4 text-cyan-400"}),"Email Address"]}),a.jsx(m.NI,{children:a.jsx(w.I,{placeholder:"Enter your email",type:"email",autoComplete:"email",className:"h-12 bg-input border-input text-foreground placeholder:text-muted-foreground focus:border-cyan-400 focus:ring-cyan-400/20",...e,onChange:s=>{e.onChange(s),b("")}})}),a.jsx(m.zG,{className:"text-destructive"})]})}),a.jsx(m.Wi,{control:e.control,name:"password",render:({field:e})=>(0,a.jsxs)(m.xJ,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(m.lX,{className:"text-foreground font-medium flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-4 h-4 text-cyan-400"}),"Password"]}),a.jsx(i.default,{href:"/login/forget-password",className:"text-sm text-primary hover:text-primary/80 transition-colors duration-200 hover:underline",children:"Forgot password?"})]}),a.jsx(m.NI,{children:a.jsx(j.W,{placeholder:"Enter your password",autoComplete:"current-password",className:"h-12 bg-input border-input text-foreground placeholder:text-muted-foreground focus:border-cyan-400 focus:ring-cyan-400/20",...e,onChange:s=>{e.onChange(s),b("")}})}),a.jsx(m.zG,{className:"text-destructive"})]})}),r&&a.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-destructive text-sm text-center flex items-center justify-center gap-2",children:[a.jsx(p.Z,{className:"w-4 h-4"}),r]})}),a.jsx(u.z,{type:"submit",className:"w-full h-12 rounded-lg bg-gradient-to-r from-lime-500 via-emerald-500 to-cyan-500 font-semibold text-primary-foreground shadow-lg transition-all duration-200 hover:from-lime-400 hover:via-emerald-500 hover:to-cyan-400 hover:shadow-cyan-500/20 active:scale-[0.98]",disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[a.jsx(f.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing In..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-xs",children:[a.jsx(p.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"Secure Login"})]}),a.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-xs",children:[a.jsx(x.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"256-bit SSL"})]})]})]})]}),a.jsx("div",{className:"text-center mt-8",children:(0,a.jsxs)("p",{className:"premium-subtle text-sm",children:["\xa9 ",new Date().getFullYear()," Hash for Gamers. All rights reserved."]})})]})})}},86802:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(26323).Z)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]])}};